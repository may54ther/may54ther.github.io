---
title: "웹 인쇄 (@media print, @page)"
authors: "may54ther"
date: "2020-07-16"
tags:
    - "CSS"
    - "@media_print"
    - "@page"
---

:::note MEMO

-   A4 사이즈
    -   210 \* 297(mm)
    -   `72ppi`: 595 \* 842(px)
    -   `300ppi`: 2480 \* 3508(px)
        :::

## [@media print](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_media_queries/Printing)

웹 페이지를 인쇄할 때 표시되는 화면을 제어하는 미디어 쿼리

```css
@media print {
}
```

### display

페이지에서 숨겨야 하는 부분은 `display` 속성으로 제어

```css
@media print {
	header,	footer,	.no-print { display: none }
}
```

### page-break

#### page-break-before

해당 엘리먼트의 이전 페이지 넘김을 지정

```
page-break-before: [auto, inherit, always, avoid, left, right]
```

    - auto: 자동
    - inherit: 부모 값 상속
    - always: 해당 엘리먼트의 앞 페이지 넘김
    - avoid: 해당 엘리먼트의 앞 페이지 넘김을 금지
    - left: 엘리먼트 앞에서 분리된 페이지가 왼쪽 면에 위치
    - right: 엘리먼트 앞에서 분리된 페이지가 오른쪽 면에 위치

#### page-break-after

해당 엘리먼트의 다음 페이지 넘김을 지정

```
page-break-after: [auto, inherit, always, avoid, left, right]
```

-   auto: 자동
-   inherit: 부모 값 상속
-   always: 해당 엘리먼트의 뒤의 페이지 넘김
-   avoid: 해당 엘리먼트의 뒤의 페이지 넘김을 금지
-   left: 엘리먼트 뒤에서 분리된 페이지가 왼쪽 면에 위치
-   right: 엘리먼트 뒤에서 분리된 페이지가 오른쪽 면에 위치

#### page-break-inside

해당 엘리먼트의 내부 페이지 넘김을 지정

```
page-break-after: [auto, inherit, avoid]
```

-   auto: 자동
-   inherit: 부모 값 상속
-   avoid: 해당 엘리먼트의 내부에서 페이지 넘김을 금지

### background

인쇄 시 배경(이미지, 색상)을 강제로 보이게 지정

```css
/* Webkit 기반 브라우저에서만 동작(Chrome, Safari) */
@media print {
	* {
		-webkit-print-color-adjust: exact;
		print-color-adjust: exact;
	}
}
```

## [@page](https://developer.mozilla.org/en-US/docs/Web/CSS/@page)

웹 페이지를 인쇄할 때 표시되는 '페이지'의 크기, 방향, 여백 지정

-   size, margin, orphan, widows, page-break 등 인쇄 전용 속성 사용

```css
@page {
	size: auto;
	size: portrait;
	size: landscape;

	size: 6in;
	size: 4in 6in;

	size: A4;
	size: B5;
	size: letter;

	size: A4 portrait;
}
```

### 머리글/바닥글 제거

```css
/* Chrome 에서만 동작 */
@page {
	margin: 0;
}
```

### 빈 페이지 제거

> 이 문제는 개인적으로 IE에서 애를 먹었던 문제.  
> 근본적인 해결 방안이 아니라 꼼수일 수 있음. 🤣

인쇄 시, '서브픽셀' 현상으로 인해 자꾸 빈 페이지가 생기는 문제가 있었다.

-   A4 사이즈를 `mm` 에서 `px`로 변경하는 과정에서 `1402.34px` 과 같은 서브픽셀이 발생한다.
-   이러한 서브픽셀을 해결하기 위해 다음과 같이 **서브픽셀 해결법 1, 2**를 시도해보았다.
-   근데... 이것도 저것도 다 안된다? 그럼 그냥 `.print{ zoom: 98% }` 요 편법도 있긴 함.

#### HTML

```html
<ul class="list__page">
	<li class="page">
		<img class="content" src="/content-image.jpg" alt="content" />
		<img class="watermark" src="/watermark-image.svg" alt="content" />
		<!-- watermark 를 svg로 사용한 이유?
      - PNG 파일은 IE에서 인쇄 시 표시되지 않는 경우가 있었음 ㅜㅜ -->
	</li>
</ul>
```

#### CSS

```css
@page {
	/* A4 */
	size: 210mm 297mm;
	margin: 0mm;
}

@media print {
	html, body {
		margin: 0;
		padding: 0;
		page-break-after: avoid;
		page-break-before: avoid;
	}
	.body, .page {
	    /* 서브픽셀 해결1 */
		margin-top: -1px;
	}

	.page:first-child {
		page-break-before: auto;
		page-break-inside: avoid;
	}
	.page {
		overflow: hidden;
		position: relative;
		width: 210mm;
		/* 서브픽셀 해결1 사용 시 */
		height: 297mm;
		/* 서브픽셀 해결2 - IE는 미지원 */
		height: calc(297mm - 1px);
		page-break-before: always;
	}
	.page > .content {
		/* img 를 .page 안에 꽉차게 */
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		width: 100%;
		height: 100%;
	}
	.page > .watermark {
		position: absolute;
		top: 45%;
		left: 25%;
		width: 50%;
		height: 10%;
		z-index: 50;
	}
}
```
